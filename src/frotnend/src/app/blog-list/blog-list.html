@for (blog of blogs; track blog.id) {
  <div class="blog-post mb-12 bg-white p-6 rounded-lg shadow-md">
    <h2 class="text-3xl font-bold mb-3 text-gray-800">{{ blog.title }}</h2>
    <p class="text-gray-600 mb-6">{{ blog.content }}</p>
      <form [formGroup]="commentForm" (ngSubmit)="addComment(blog.id)" class="mt-6">
        <h4 class="text-xl font-semibold mb-3">Dodaj komentarz</h4>
        <div class="mb-4">
          <label for="author-{{blog.id}}" class="block text-sm font-medium text-gray-700 mb-1">Twoje imię</label>
          <input type="text" id="author-{{blog.id}}" formControlName="author" placeholder="Np. Jan Kowalski"
                 class="border p-2 w-full rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
          @if (commentForm.get('author')?.invalid && commentForm.get('author')?.touched) {
            <div class="text-red-600 text-sm mt-1">
              @if (commentForm.get('author')?.hasError('required')) { <p>Imię jest wymagane.</p> }
              @if (commentForm.get('author')?.hasError('minlength')) { <p>Imię musi mieć co najmniej 3 znaki.</p> }
            </div>
          }
        </div>
        <div class="mb-4">
          <label for="text-{{blog.id}}" class="block text-sm font-medium text-gray-700 mb-1">Treść komentarza</label>
          <textarea formControlName="text" id="text-{{blog.id}}" placeholder="Twoja opinia..."
                    class="border p-2 w-full rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500" rows="4"></textarea>
          @if (commentForm.get('text')?.invalid && commentForm.get('text')?.touched) {
            <div class="text-red-600 text-sm mt-1">
              @if (commentForm.get('text')?.hasError('required')) { <p>Treść komentarza jest wymagana.</p> }
              @if (commentForm.get('text')?.hasError('minlength')) { <p>Komentarz musi mieć co najmniej 5 znaków.</p> }
            </div>
          }
        </div>
        <button type="submit" [disabled]="commentForm.invalid"
                class="bg-blue-500 text-white px-6 py-2 rounded-md font-semibold hover:bg-blue-600 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed">
          Opublikuj
        </button>
      </form>
      <div class="comments-section border-t pt-6">
      <h3 class="text-2xl font-semibold mb-4 text-gray-700">Komentarze ({{ blog.comments.length }})</h3>
      
      @for (comment of blog.comments; track comment.id) {
        <div class="comment mb-4 p-4 bg-gray-50 rounded-lg border-l-4 border-blue-300">
          <div class="flex justify-between items-center mb-1">
            <strong class="text-blue-600">{{ comment.author }}</strong>
            <span class="text-xs text-gray-500">{{ comment.date | date:'short' }}</span>
          </div>
          <p class="text-gray-800">{{ comment.text }}</p>
        </div>
      } @empty {
        <p class="text-gray-500 italic mb-4">Brak komentarzy. Bądź pierwszy!</p>
      }
    </div>
  </div>
}